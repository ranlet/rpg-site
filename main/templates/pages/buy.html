<!DOCTYPE html>
<html lang="en">
<head>
  <title>Покупка</title>
  {% include "../templs/style.html" %}
</head>
<header>
  {% include "../templs/profile_btn.html" %}
</header>
<body>
  <form style="width: 100%;" method="POST" id="frm">
    <div style="position: relative; padding: 30px; margin: 80px 40px 0 40px; min-width: 1000px; display: flex; background-color: #312f3d; color: white; border-radius: 10px;">
      <div style="width: 25%;">
        <v-img
          src="{{ item.item.item_image }}"
          cover
          style="border-radius: 10px; width: 100%"
        ></v-img>
        <v-card-title style="margin-top: 25px; font-size: 25px; text-align: center; width: 100%">{{ item.item.item_name }}</v-card-title>
      </div>
      <div style="width: 75%; position: relative; margin-left: 30px">
        <p style="font-size: 20px;">Описание: {{ item.item.item_description }}</p>
        {% csrf_token %}
        <div style="display: flex; position: absolute; height: 80px; bottom: 100px; font-size: 20px; padding: 15px 0px 15px 15px; background-color: #1C1A24; border-radius: 15px;">
          <p style="margin: auto 0 auto 0">Продавец: <span style="color: green;">{{ item.item_owner.username }}</span></p>
          <v-container fluid :position="absolute" style="width: 100px; margin-top: -2px;">
            <v-row justify="center">
              <v-menu min-width="200px" rounded>
                <template v-slot:activator="{ props }">
                  <v-btn icon v-bind="props">
                    <v-avatar color="white" size="large">
                      <v-img
                        alt="Avatar"
                        src="{% if seller.image %}
                          /media/{{ seller.image }}
                          {% else %}
                          https://cdn.vuetifyjs.com/images/parallax/material.jpg
                          {% endif %}"
                      ></v-img>
                    </v-avatar>
                  </v-btn>
                </template>
                <div class="profile_container">
                  <v-card-text>
                    <div class="mx-auto text-center">
                      <v-avatar color="white" style="width: 300px; height: 300px;">
                        <v-img
                          alt="Avatar"
                          src="{% if seller.image %}
                          /media/{{ seller.image }}
                          {% else %}
                          https://cdn.vuetifyjs.com/images/parallax/material.jpg
                          {% endif %}"
                        ></v-img>
                      </v-avatar>
                    </div>
                  </v-card-text>
                </div>
              </v-menu>
            </v-row>
          </v-container>

        </div>
        <v-btn id="buy_btn" color="orange" variant="tonal" theme="primary" style="width: 100%; height: 80px; bottom: 0; position: absolute; font-size: 25px;">
          Купить за {{ item.item_price }}
        </v-btn>
      </div>
      <p style="position: absolute; bottom: -10px; right: 10px; font-size: 13px; font-weight: 600; opacity: 0.5;">id предмета: {{ item.item_unique_id }}</p>
    </div>
  </form>


</body>
<script src="../static/js/script.js"></script>
<script>
  'use strict';
  buy_btn.addEventListener('click', function() {
    Swal.fire({
      title: 'Покупка предмета',
      text: 'Купить {{ item.item_name }} за {{ item.item_price }}?',
      icon: 'question',
      confirmButtonText: "Купить",
      showCancelButton: true,
      cancelButtonText: "Отмена",
      background: "#312F3D",
      color: "#FFF",
    });
    let second = document.querySelector(".swal2-confirm.swal2-styled");
    second.style.width = "130px";
    second.addEventListener('click', function() {
      frm.submit();
    });
  });


</script>
</html>

