<!DOCTYPE html>
<html lang="en">
<head>
  <title>Профиль</title>
  {% include "../templs/style.html" %}
</head>
<header>
  {% include "../templs/profile_btn.html" %}
</header>
<body>

<form method="POST" enctype="multipart/form-data" id="frm">
  {% csrf_token %}
  <v-card theme="dark" style="margin: 80px 0 20px 50px; width: 70%; padding: 50px 50px 50px 50px; border-radius: 10px; box-shadow: 0 0 10px white">

    <v-img
      :width="250"
      :height="250"
      aspect-ratio="1/1"
      cover
      src="{% if profile.image %}{{ profile.image.url }}{% else %}https://cdn.vuetifyjs.com/images/parallax/material.jpg{% endif %}"
      style="border-radius: 5px"
    ></v-img>
    <p class="text-h6" style="font-family: 'JetBrains Mono'; margin-top: 25px; color: white;">Баланс: {{ profile.balance }}</p>
    <v-file-input theme="light" name="filename" label="Файл изображения" variant="outlined"  style="margin: 30px 0 5px 0; border-radius: 20px; width: 100%" accept="image/*"></v-file-input>
    <v-text-field name="firstname" label="Текущее имя: {{ user.first_name }}" variant="outlined" style="margin-top: 5px; border-radius: 20px; width: 100%"></v-text-field>
    <v-text-field name="lastname" label="Текущая фамилия: {{ user.last_name }}" variant="outlined" style="margin-top: 5px; margin-bottom: 5px; border-radius: 20px; width: 100%"></v-text-field>
    <v-btn append-icon="mdi-content-save-all" theme="light" v-bind="activatorProps" id="ok_btn">
      Применить
    </v-btn>
  </v-card>

</form>

</body>
<script src="../static/js/script.js"></script>
<script>
  'use strict';
  ok_btn.addEventListener('click', function() {
    Swal.fire({
      title: 'Редактор',
      text: 'Применить изменения?',
      icon: 'question',
      confirmButtonText: "Применить",
      showCancelButton: true,
      cancelButtonText: "Отмена",
      background: "#312F3D",
      color: "#FFF",
    });
    let second = document.querySelector(".swal2-confirm.swal2-styled");
    second.style.width = "130px";
    second.addEventListener('click', function() {
      frm.submit();
    });
  });

  {% for msg in messages %}
  Swal.fire({
    position: "top-end",
    title: 'Успешно',
    text: '{{ msg }}',
    icon: '{{ msg.tags }}',
    showConfirmButton: false,
  });
  {% endfor %}
</script>
</html>
